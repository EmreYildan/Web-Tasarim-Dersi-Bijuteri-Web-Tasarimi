<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>Emre M√ºcevherat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <link rel="stylesheet" media="all" href="../css/style.css">
    <link rel="stylesheet" href="../css/chatbot.css">
    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>

    <header id="header">
        <div class="container">
            <a href="index.html" id="logo" title="Emre M√ºcevherat">Emre M√ºcevherat</a>
            <div class="right-links">
                <ul>
                    <li><a href="cart.html"><span class="ico-products"></span></a></li>
                    <li><a href="#"><span class="ico-account"></span>Hesap</a></li>
                    <li><a href="#"><span class="ico-signout"></span>√áƒ±kƒ±≈ü</a></li>
                </ul>
            </div>
        </div>
        <!-- / container -->
    </header>
    <!-- / header -->

    <nav id="menu" role="navigation" aria-label="Ana men√º">
        <div class="container">
            <button class="trigger" aria-label="Men√ºy√º a√ß/kapat" aria-expanded="false"></button>
            <ul role="menubar">
                <li role="none"><a href="index.html" role="menuitem">Ana Sayfa</a></li>
                <li class="menu-item has-submenu" role="none">
                    <a href="products.html" role="menuitem" aria-haspopup="true" aria-expanded="false">√úr√ºnlerimiz</a>
                    <ul class="submenu" role="menu" aria-label="√úr√ºn kategorileri">
                        <li role="none"><a href="new-collection.html" role="menuitem">Yeni Koleksiyon</a></li>
                        <li role="none"><a href="necklaces.html" role="menuitem">Kolyeler</a></li>
                        <li role="none"><a href="earrings.html" role="menuitem">K√ºpeler</a></li>
                        <li role="none"><a href="rings.html" role="menuitem">Y√ºz√ºkler</a></li>
                    </ul>
                </li>

                <li class="menu-item has-submenu" role="none">
                    <a href="#birimlerimiz" role="menuitem" aria-haspopup="true" aria-expanded="false">Birimlerimiz</a>
                    <ul class="submenu" role="menu" aria-label="Birimlerimiz">
                        <li role="none"><a href="text-page.html#satis" role="menuitem">Satƒ±≈ü Birimi</a></li>
                        <li role="none"><a href="text-page.html#musteri" role="menuitem">M√º≈üteri Hizmetleri</a></li>
                        <li role="none"><a href="text-page.html#tasarim" role="menuitem">Tasarƒ±m Ekibi</a></li>
                    </ul>
                </li>

                <li role="none"><a href="about.html" role="menuitem">Hakkƒ±mƒ±zda</a></li>
                <li role="none"><a href="mission-vision.html" role="menuitem">Misyon-Vizyon</a></li>
                <li role="none"><a href="announcements.html" role="menuitem">Duyurular</a></li>
                <li role="none"><a href="statistics.html" role="menuitem">ƒ∞statistikler</a></li>
                <li role="none"><a href="contact.html" role="menuitem">ƒ∞leti≈üim</a></li>
                <li role="none"><a href="cart.html" role="menuitem" aria-current="page">Sepet</a></li>
            </ul>
        </div>
        <!-- / container -->
    </nav>
    <!-- / navigation -->

    <div id="breadcrumbs">
        <div class="container">
            <ul>
                <li><a href="#">Home</a></li>
                <li>Cart</li>
            </ul>
        </div>
        <!-- / container -->
    </div>
    <!-- / body -->

    <div id="body">
        <div class="container">
            <div id="content" class="full">
                <div id="empty-cart" style="display: none; text-align: center; padding: 60px 0;">
                    <h2>Sepetiniz Bo≈ü</h2>
                    <p style="margin: 20px 0; color: #666;">Hen√ºz sepetinize √ºr√ºn eklemediniz.</p>
                    <a href="products.html" class="btn-grey">Alƒ±≈üveri≈üe Ba≈üla</a>
                </div>

                <div id="cart-content" style="display: none;">
                    <div class="cart-table">
                        <table>
                            <tr>
                                <th class="items">√úr√ºnler</th>
                                <th class="price">Fiyat</th>
                                <th class="qnt">Adet</th>
                                <th class="total">Toplam</th>
                                <th class="delete"></th>
                            </tr>
                            <tbody id="cart-items">
                                <!-- Sepet √ºr√ºnleri JavaScript ile y√ºklenecek -->
                            </tbody>
                        </table>
                    </div>

                    <div class="total-count">
                        <h4>Ara Toplam: <span id="subtotal">‚Ç∫0.00</span></h4>
                        <p>+Kargo: <span id="shipping">‚Ç∫50.00</span></p>
                        <h3>√ñdenecek Tutar: <strong id="final-total">‚Ç∫50.00</strong></h3>
                        <div style="margin-top: 20px;">
                            <a href="#" class="btn-grey" onclick="clearCart(); return false;" style="background: #dc3545; margin-right: 10px;">Sepeti Temizle</a>
                            <a href="#" class="btn-grey" onclick="finalizeOrder(); return false;">Sipari≈üi Tamamla</a>
                        </div>
                    </div>
                </div>
        
            </div>
            <!-- / content -->
        </div>
        <!-- / container -->
    </div>
    <!-- / body -->

    <footer id="footer">
        <div class="container">
            <div class="cols">
                <div class="col">
                    <h3>Frequently Asked Questions</h3>
                    <ul>
                        <li><a href="#">Fusce eget dolor adipiscing </a></li>
                        <li><a href="#">Posuere nisl eu venenatis gravida</a></li>
                        <li><a href="#">Morbi dictum ligula mattis</a></li>
                        <li><a href="#">Etiam diam vel dolor luctus dapibus</a></li>
                        <li><a href="#">Vestibulum ultrices magna </a></li>
                    </ul>
                </div>
                <div class="col media">
                    <h3>Social media</h3>
                    <ul class="social">
                        <li><a href="#"><span class="ico ico-fb"></span>Facebook</a></li>
                        <li><a href="#"><span class="ico ico-tw"></span>Twitter</a></li>
                        <li><a href="#"><span class="ico ico-gp"></span>Google+</a></li>
                        <li><a href="#"><span class="ico ico-pi"></span>Pinterest</a></li>
                    </ul>
                </div>
                <div class="col contact">
                    <h3>ƒ∞leti≈üim Bilgileri</h3>
                    <p>Emre M√ºcevherat<br>Kocaeli √úniversitesi Teknoloji Fak√ºltesi<br>Umuttepe Kamp√ºs√º, ƒ∞zmit/Kocaeli</p>
                    <p><span class="ico ico-em"></span><a href="mailto:info@emremucevherat.com">info@emremucevherat.com</a></p>
                    <p><span class="ico ico-ph"></span>(0262) 303 10 00</p>
                </div>
                <div class="col newsletter">
                    <h3>Web Tasarƒ±m</h3>
                    <p>Bu web sitesi Kocaeli √úniversitesi Teknoloji Fak√ºltesi Bili≈üim Sistemleri M√ºhendisliƒüi √∂ƒürencisi Emre Yasin Yƒ±ldan tarafƒ±ndan tasarlanmƒ±≈ütƒ±r.</p>
                    <p><strong>TBL303 Web Tasarƒ±mƒ± Dersi</strong><br>2025-2026 G√ºz D√∂nemi</p>
                </div>
                <div class="col">
                    <h3>Y√∂netim</h3>
                    <ul>
                        <li><a href="../admin/index.html" target="_blank">Admin Panel</a></li>
                    </ul>
                </div>
            </div>
            <p class="copy">Copyright 2025 Emre M√ºcevherat. All rights reserved.</p>
        </div>
        <!-- / container -->
    </footer>
    <!-- / footer -->


    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write("<script src='../js/jquery-1.11.1.min.js'>\x3C/script>")</script>
    <script src="../js/plugins.js"></script>
    <script src="../js/main.js"></script>
    <script>
    // Sepet Y√∂netimi
    let cart = [];
    const SHIPPING_COST = 50;

    document.addEventListener('DOMContentLoaded', function() {
        loadCart();
        
        // ƒ∞lk kez a√ßƒ±ldƒ±ƒüƒ±nda demo sepet olu≈ütur (opsiyonel)
        if (!localStorage.getItem('cartDemoShown') && cart.length === 0) {
            // Demo √ºr√ºnler ekle
            cart = [
                {
                    id: 1,
                    name: "Elmas Ta≈ülƒ± Altƒ±n Kolye",
                    price: 3250,
                    image: "../images/1.jpg",
                    quantity: 1
                },
                {
                    id: 3,
                    name: "Elmas Ta≈ülƒ± Sallantƒ±lƒ± K√ºpe",
                    price: 2850,
                    image: "../images/3.jpg",
                    quantity: 2
                }
            ];
            localStorage.setItem('cart', JSON.stringify(cart));
            localStorage.setItem('cartDemoShown', 'true');
        }
        
        displayCart();
        updateCartHeader();
    });

    function loadCart() {
        const savedCart = localStorage.getItem('cart');
        cart = savedCart ? JSON.parse(savedCart) : [];
    }

    function saveCart() {
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartHeader();
    }

    function displayCart() {
        const cartItemsContainer = document.getElementById('cart-items');
        const emptyCart = document.getElementById('empty-cart');
        const cartContent = document.getElementById('cart-content');

        if (cart.length === 0) {
            emptyCart.style.display = 'block';
            cartContent.style.display = 'none';
            return;
        }

        emptyCart.style.display = 'none';
        cartContent.style.display = 'block';

        // √úr√ºn listesini olu≈ütur
        console.log('Sepetteki √ºr√ºnler:', cart);
        cartItemsContainer.innerHTML = cart.map(item => {
            const itemTotal = item.price * item.quantity;
            console.log('√úr√ºn render ediliyor - ID:', item.id, 'Type:', typeof item.id, 'Name:', item.name);
            return `
                <tr data-id="${item.id}">
                    <td class="items">
                        <div class="image">
                            <img src="${item.image}" alt="${item.name}" style="width: 80px; height: 80px; object-fit: cover;">
                        </div>
                        <h3><a href="product.html?id=${item.id}">${item.name}</a></h3>
                    </td>
                    <td class="price">‚Ç∫${parseFloat(item.price).toLocaleString('tr-TR', {minimumFractionDigits: 2})}</td>
                    <td class="qnt">
                        <select onchange="updateQuantity(${item.id}, this.value)">
                            ${[1,2,3,4,5,6,7,8,9,10].map(n => 
                                `<option value="${n}" ${n === item.quantity ? 'selected' : ''}>${n}</option>`
                            ).join('')}
                        </select>
                    </td>
                    <td class="total">‚Ç∫${itemTotal.toLocaleString('tr-TR', {minimumFractionDigits: 2})}</td>
                    <td class="delete">
                        <a href="#" class="ico-del" onclick="console.log('Silme isteƒüi - ID:', ${item.id}); removeFromCart(${item.id}); return false;" title="Sepetten √áƒ±kar">üóëÔ∏è</a>
                    </td>
                </tr>
            `;
        }).join('');

        updateTotals();
    }

    function updateTotals() {
        const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const shipping = cart.length > 0 ? SHIPPING_COST : 0;
        const finalTotal = subtotal + shipping;

        document.getElementById('subtotal').textContent = '‚Ç∫' + subtotal.toLocaleString('tr-TR', {minimumFractionDigits: 2});
        document.getElementById('shipping').textContent = '‚Ç∫' + shipping.toLocaleString('tr-TR', {minimumFractionDigits: 2});
        document.getElementById('final-total').textContent = '‚Ç∫' + finalTotal.toLocaleString('tr-TR', {minimumFractionDigits: 2});
    }

    function updateQuantity(productId, newQuantity) {
        const item = cart.find(item => item.id == productId);
        if (item) {
            item.quantity = parseInt(newQuantity);
            saveCart();
            displayCart();
        }
    }

    function removeFromCart(productId) {
        console.log('removeFromCart √ßaƒürƒ±ldƒ± - productId:', productId, 'type:', typeof productId);
        console.log('Mevcut sepet:', JSON.stringify(cart));
        
        if (confirm('Bu √ºr√ºn√º sepetten √ßƒ±karmak istediƒüinizden emin misiniz?')) {
            const beforeLength = cart.length;
            const removedItem = cart.find(item => item.id == productId);
            console.log('Silinecek √ºr√ºn bulundu:', removedItem);
            
            cart = cart.filter(item => {
                const keep = item.id != productId;
                console.log(`Item ID: ${item.id} (${typeof item.id}), ProductID: ${productId} (${typeof productId}), Keep: ${keep}`);
                return keep;
            });
            
            console.log('Filtreleme sonrasƒ± sepet uzunluƒüu:', cart.length);
            
            if (cart.length < beforeLength) {
                console.log('‚úì √úr√ºn ba≈üarƒ±yla silindi!');
                saveCart();
                displayCart();
            } else {
                console.error('‚úó √úr√ºn silinemedi!');
                console.error('ProductID:', productId, 'Type:', typeof productId);
                console.error('Cart IDs:', cart.map(item => `${item.id} (${typeof item.id})`));
                alert('√úr√ºn silinirken bir hata olu≈ütu! Console\'u kontrol edin.');
            }
        }
    }

    function updateCartHeader() {
        // Global fonksiyonu kullan
        if (typeof updateGlobalCartHeader === 'function') {
            updateGlobalCartHeader();
        }
    }

    function clearCart() {
        if (confirm('Sepetteki t√ºm √ºr√ºnleri silmek istediƒüinizden emin misiniz?')) {
            cart = [];
            saveCart();
            displayCart();
        }
    }

    function finalizeOrder() {
        if (cart.length === 0) {
            alert('Sepetiniz bo≈ü!');
            return;
        }

        const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const finalTotal = subtotal + SHIPPING_COST;

        if (confirm(`Toplam ‚Ç∫${finalTotal.toLocaleString('tr-TR', {minimumFractionDigits: 2})} tutarƒ±ndaki sipari≈üinizi onaylƒ±yor musunuz?`)) {
            alert('Sipari≈üiniz ba≈üarƒ±yla alƒ±ndƒ±! Te≈üekk√ºr ederiz.');
            cart = [];
            saveCart();
            displayCart();
        }
    }

    // Sayfa y√ºklen–¥–∏ƒüinde header'ƒ± g√ºncelle
    updateCartHeader();
    </script>
    <script src="../js/chatbot.js"></script>
</body>
</html>
