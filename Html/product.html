<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>Diana‚Äôs jewelry</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <link rel="stylesheet" media="all" href="../css/style.css">
    <link rel="stylesheet" href="../css/chatbot.css">
    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>

    <header id="header">
        <footer id="footer" role="contentinfo">
            <a href="index.html" id="logo" title="Emre M√ºcevherat">Emre M√ºcevherat</a>
            <div class="right-links">
                <ul>
                    <li><a href="cart.html"><span class="ico-products"></span></a></li>
                    <li><a href="#"><span class="ico-account"></span>Hesap</a></li>
                    <li><a href="#"><span class="ico-signout"></span>√áƒ±kƒ±≈ü</a></li>
                </ul>
            </div>
        </div>
        <!-- / container -->
    </header>
    <!-- / header -->

    <nav id="menu" role="navigation" aria-label="Ana men√º">
        <div class="container">
            <button class="trigger" aria-label="Men√ºy√º a√ß/kapat" aria-expanded="false"></button>
            <ul role="menubar">
                <li role="none"><a href="index.html" role="menuitem">Ana Sayfa</a></li>
                <li class="menu-item has-submenu" role="none">
                    <a href="products.html" role="menuitem" aria-haspopup="true" aria-expanded="false">√úr√ºnlerimiz</a>
                    <ul class="submenu" role="menu" aria-label="√úr√ºn kategorileri">
                        <li role="none"><a href="new-collection.html" role="menuitem">Yeni Koleksiyon</a></li>
                        <li role="none"><a href="necklaces.html" role="menuitem">Kolyeler</a></li>
                        <li role="none"><a href="earrings.html" role="menuitem">K√ºpeler</a></li>
                        <li role="none"><a href="rings.html" role="menuitem">Y√ºz√ºkler</a></li>
                    </ul>
                </li>

                <li class="menu-item has-submenu" role="none">
                    <a href="#birimlerimiz" role="menuitem" aria-haspopup="true" aria-expanded="false">Birimlerimiz</a>
                    <ul class="submenu" role="menu" aria-label="Birimlerimiz">
                        <li role="none"><a href="text-page.html#satis" role="menuitem">Satƒ±≈ü Birimi</a></li>
                        <li role="none"><a href="text-page.html#musteri" role="menuitem">M√º≈üteri Hizmetleri</a></li>
                        <li role="none"><a href="text-page.html#tasarim" role="menuitem">Tasarƒ±m Ekibi</a></li>
                    </ul>
                </li>

                <li role="none"><a href="about.html" role="menuitem">Hakkƒ±mƒ±zda</a></li>
                <li role="none"><a href="mission-vision.html" role="menuitem">Misyon-Vizyon</a></li>
                <li role="none"><a href="announcements.html" role="menuitem">Duyurular</a></li>
                <li role="none"><a href="statistics.html" role="menuitem">ƒ∞statistikler</a></li>
                <li role="none"><a href="contact.html" role="menuitem">ƒ∞leti≈üim</a></li>
                <li role="none"><a href="cart.html" role="menuitem">Sepet</a></li>
            </ul>
        </div>
        <!-- / container -->
    </nav>
    <!-- / navigation -->

    <div id="breadcrumbs">
        <div class="container">
            <ul>
                <li><a href="#">Home</a></li>
                <li>Product page</li>
            </ul>
        </div>
        <!-- / container -->
    </div>
    <!-- / body -->

    <div id="body">
        <div class="container">
            <div id="content" class="full">
                <div class="product">
                    <div class="image">
                        <img src="../images/5.jpg" alt="">
                    </div>
                    <div class="details">
                        <h1>Lorem ipsum dolor</h1>
                        <h4>$990.00</h4>
                        <div class="entry">
                            <div class="tabs">
                                <div class="nav">
                                    <ul>
                                        <li class="active"><a href="#desc">Description</a></li>
                                        <li><a href="#spec">Specification</a></li>
                                        <li><a href="#ret">Returns</a></li>
                                    </ul>
                                </div>
                                <div class="tab-content active" id="desc">
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
                                </div>
                                <div class="tab-content" id="spec">
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
                                </div>
                                <div class="tab-content" id="ret">
                                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
                                </div>
                            </div>
                        </div>
                        <div class="actions">
                            <label>Adet:</label>
                            <select id="product-quantity">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                            <a href="#" class="btn-grey" id="add-to-cart-btn">Sepete Ekle</a>
                        </div>
                    </div>
                </div>

                <!-- YORUM Sƒ∞STEMƒ∞ -->
                <div class="reviews-section" style="margin-top: 60px;">
                    <h2 style="font-size: 28px; margin-bottom: 30px; font-family: 'Novecentowide', sans-serif;">M√º≈üteri Yorumlarƒ±</h2>
                    
                    <!-- Yorum ƒ∞statistikleri -->
                    <div class="review-stats" style="background: #f9f9f9; padding: 30px; border-radius: 12px; margin-bottom: 40px; display: flex; gap: 40px; align-items: center; flex-wrap: wrap;">
                        <div class="rating-summary" style="text-align: center; min-width: 200px;">
                            <div class="avg-rating" id="avgRating" style="font-size: 56px; font-weight: bold; color: #f39c12; margin-bottom: 10px;">0.0</div>
                            <div class="stars-display" id="avgStars" style="font-size: 28px; color: #f39c12; margin-bottom: 8px;">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                            <div class="review-count" id="reviewCount" style="color: #666; font-size: 14px;">0 deƒüerlendirme</div>
                        </div>
                        <div class="rating-bars" style="flex: 1; min-width: 300px;">
                            <div class="rating-bar" style="display: flex; align-items: center; margin-bottom: 8px;" data-rating="5">
                                <span style="width: 60px; font-size: 13px;">5 yƒ±ldƒ±z</span>
                                <div style="flex: 1; height: 8px; background: #e0e0e0; border-radius: 4px; margin: 0 10px; overflow: hidden;">
                                    <div class="bar-fill" style="height: 100%; background: #f39c12; width: 0%; transition: width 0.5s;"></div>
                                </div>
                                <span class="bar-count" style="width: 40px; text-align: right; font-size: 13px; color: #999;">0</span>
                            </div>
                            <div class="rating-bar" style="display: flex; align-items: center; margin-bottom: 8px;" data-rating="4">
                                <span style="width: 60px; font-size: 13px;">4 yƒ±ldƒ±z</span>
                                <div style="flex: 1; height: 8px; background: #e0e0e0; border-radius: 4px; margin: 0 10px; overflow: hidden;">
                                    <div class="bar-fill" style="height: 100%; background: #f39c12; width: 0%; transition: width 0.5s;"></div>
                                </div>
                                <span class="bar-count" style="width: 40px; text-align: right; font-size: 13px; color: #999;">0</span>
                            </div>
                            <div class="rating-bar" style="display: flex; align-items: center; margin-bottom: 8px;" data-rating="3">
                                <span style="width: 60px; font-size: 13px;">3 yƒ±ldƒ±z</span>
                                <div style="flex: 1; height: 8px; background: #e0e0e0; border-radius: 4px; margin: 0 10px; overflow: hidden;">
                                    <div class="bar-fill" style="height: 100%; background: #f39c12; width: 0%; transition: width 0.5s;"></div>
                                </div>
                                <span class="bar-count" style="width: 40px; text-align: right; font-size: 13px; color: #999;">0</span>
                            </div>
                            <div class="rating-bar" style="display: flex; align-items: center; margin-bottom: 8px;" data-rating="2">
                                <span style="width: 60px; font-size: 13px;">2 yƒ±ldƒ±z</span>
                                <div style="flex: 1; height: 8px; background: #e0e0e0; border-radius: 4px; margin: 0 10px; overflow: hidden;">
                                    <div class="bar-fill" style="height: 100%; background: #f39c12; width: 0%; transition: width 0.5s;"></div>
                                </div>
                                <span class="bar-count" style="width: 40px; text-align: right; font-size: 13px; color: #999;">0</span>
                            </div>
                            <div class="rating-bar" style="display: flex; align-items: center; margin-bottom: 8px;" data-rating="1">
                                <span style="width: 60px; font-size: 13px;">1 yƒ±ldƒ±z</span>
                                <div style="flex: 1; height: 8px; background: #e0e0e0; border-radius: 4px; margin: 0 10px; overflow: hidden;">
                                    <div class="bar-fill" style="height: 100%; background: #f39c12; width: 0%; transition: width 0.5s;"></div>
                                </div>
                                <span class="bar-count" style="width: 40px; text-align: right; font-size: 13px; color: #999;">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Yorum Filtreleme -->
                    <div class="review-filters" style="margin-bottom: 30px; display: flex; gap: 15px; flex-wrap: wrap;">
                        <button class="filter-btn active" data-filter="all" style="padding: 10px 20px; border: 2px solid #1f2937; background: #1f2937; color: #fff; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 14px;">T√ºm√º</button>
                        <button class="filter-btn" data-filter="5" style="padding: 10px 20px; border: 2px solid #e0e0e0; background: #fff; color: #333; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 14px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</button>
                        <button class="filter-btn" data-filter="4" style="padding: 10px 20px; border: 2px solid #e0e0e0; background: #fff; color: #333; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 14px;">‚≠ê‚≠ê‚≠ê‚≠ê</button>
                        <button class="filter-btn" data-filter="3" style="padding: 10px 20px; border: 2px solid #e0e0e0; background: #fff; color: #333; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 14px;">‚≠ê‚≠ê‚≠ê</button>
                        <button class="filter-btn" data-filter="photo" style="padding: 10px 20px; border: 2px solid #e0e0e0; background: #fff; color: #333; border-radius: 25px; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 14px;">üì∑ Fotoƒüraflƒ±</button>
                    </div>

                    <!-- Yorum Listesi -->
                    <div id="reviewsList"></div>

                    <!-- Yorum Yazma Formu -->
                    <div class="write-review" style="background: #f9f9f9; padding: 30px; border-radius: 12px; margin-top: 40px;">
                        <h3 style="font-size: 20px; margin-bottom: 20px; font-family: 'Novecentowide', sans-serif;">√úr√ºn√º Deƒüerlendirin</h3>
                        <form id="reviewForm">
                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Puanƒ±nƒ±z *</label>
                                <div class="star-rating" style="font-size: 36px; color: #ddd; cursor: pointer;">
                                    <span class="star" data-rating="1">‚òÜ</span>
                                    <span class="star" data-rating="2">‚òÜ</span>
                                    <span class="star" data-rating="3">‚òÜ</span>
                                    <span class="star" data-rating="4">‚òÜ</span>
                                    <span class="star" data-rating="5">‚òÜ</span>
                                </div>
                                <input type="hidden" id="ratingInput" required>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Adƒ±nƒ±z *</label>
                                <input type="text" id="nameInput" required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px;">
                            </div>
                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Yorumunuz *</label>
                                <textarea id="commentInput" required rows="5" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; resize: vertical;"></textarea>
                            </div>
                            <button type="submit" style="padding: 14px 30px; background: #1f2937; color: #fff; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 15px; transition: all 0.3s;">Yorum G√∂nder</button>
                        </form>
                    </div>
                </div>

            </div>
            <!-- / content -->
        </div>
        <!-- / container -->
    </div>
    <!-- / body -->

    <footer id="footer">
        <div class="container">
            <div class="cols">
                <div class="col">
                    <h3>Frequently Asked Questions</h3>
                    <ul>
                        <li><a href="#">Fusce eget dolor adipiscing </a></li>
                        <li><a href="#">Posuere nisl eu venenatis gravida</a></li>
                        <li><a href="#">Morbi dictum ligula mattis</a></li>
                        <li><a href="#">Etiam diam vel dolor luctus dapibus</a></li>
                        <li><a href="#">Vestibulum ultrices magna </a></li>
                    </ul>
                </div>
                <div class="col media">
                    <h3>Social media</h3>
                    <ul class="social">
                        <li><a href="#"><span class="ico ico-fb"></span>Facebook</a></li>
                        <li><a href="#"><span class="ico ico-tw"></span>Twitter</a></li>
                        <li><a href="#"><span class="ico ico-gp"></span>Google+</a></li>
                        <li><a href="#"><span class="ico ico-pi"></span>Pinterest</a></li>
                    </ul>
                </div>
                <div class="col contact">
                    <h3>ƒ∞leti≈üim Bilgileri</h3>
                    <p>Diana's Jewelry M√ºcevherat<br>Kocaeli √úniversitesi Teknoloji Fak√ºltesi<br>Umuttepe Kamp√ºs√º, ƒ∞zmit/Kocaeli</p>
                    <p><span class="ico ico-em"></span><a href="mailto:info@dianasjewelry.com">info@dianasjewelry.com</a></p>
                    <p><span class="ico ico-ph"></span>(0262) 303 10 00</p>
                </div>
                <div class="col newsletter">
                    <h3>Web Tasarƒ±m</h3>
                    <p>Bu web sitesi Kocaeli √úniversitesi Teknoloji Fak√ºltesi Bili≈üim Sistemleri M√ºhendisliƒüi √∂ƒürencileri tarafƒ±ndan tasarlanmƒ±≈ütƒ±r.</p>
                    <p><strong>TBL303 Web Tasarƒ±mƒ± Dersi</strong><br>2025-2026 G√ºz D√∂nemi</p>
                </div>
                <div class="col">
                    <h3>Y√∂netim</h3>
                    <ul>
                        <li><a href="../admin/index.html" target="_blank">Admin Panel</a></li>
                    </ul>
                </div>
            </div>
            <p class="copy">Copyright 2025 Diana's Jewelry. All rights reserved.</p>
        </div>
        <!-- / container -->
    </footer>
    <!-- / footer -->


    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write("<script src='../js/jquery-1.11.1.min.js'>\x3C/script>")</script>
    <script src="../js/plugins.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/chatbot.js"></script>
    <script>
    // =============================
    // √úR√úN DETAY Y√úKLEME
    // =============================
    (function(){
        // Test verileri yoksa (kullanƒ±cƒ± direkt product.html'e geldiyse) initialize et
        if(!localStorage.getItem('products')){
            const fallbackProducts = [
                { id: 1, name: "Elmas Ta≈ülƒ± Altƒ±n Kolye", category: "necklaces", price: 3250, image: "../images/1.jpg", description: "Zarif ve ≈üƒ±k altƒ±n kolye. 18 ayar altƒ±ndan √ºretilmi≈ütir. Elmas aƒüƒ±rlƒ±ƒüƒ±: 0.25 karat.", features: ["18 ayar altƒ±n","0.25 karat elmas","√ñzel tasarƒ±m","Garanti sertifikasƒ±"] },
                { id: 3, name: "Elmas Ta≈ülƒ± Sallantƒ±lƒ± K√ºpe", category: "earrings", price: 2850, image: "../images/3.jpg", description: "√ñzel g√ºnler i√ßin ideal sallantƒ±lƒ± elmas detaylƒ± k√ºpe.", features: ["14 ayar altƒ±n","Elmas detay","Hafif yapƒ±","Rahat kullanƒ±m"] },
                { id: 5, name: "Tek Ta≈ü Elmas Y√ºz√ºk", category: "rings", price: 8500, image: "../images/14.jpg", description: "Ni≈üan ve evlilik teklifleri i√ßin klasik tek ta≈ü y√ºz√ºk.", features: ["18 ayar beyaz altƒ±n","GIA sertifikalƒ± elmas","1 karat","√ñzel kutu"] }
            ];
            localStorage.setItem('products', JSON.stringify(fallbackProducts));
        }

        // URL'den id parametresini al
        function getParam(name){
            const params = new URLSearchParams(window.location.search);
            return params.get(name);
        }
        const productIdParam = getParam('id');
        const productId = productIdParam ? parseInt(productIdParam,10) : null;
        const products = JSON.parse(localStorage.getItem('products')) || [];
        const product = products.find(p => p.id === productId);

        if(!product){
            window.location.href = 'products.html';
            return;
        }

        if(product){
            // Ana container elemanlarƒ±
            const titleEl = document.querySelector('.product .details h1');
            const priceEl = document.querySelector('.product .details h4');
            const imgEl = document.querySelector('.product .image img');
            const tabsDesc = document.getElementById('desc');
            const tabsSpec = document.getElementById('spec');
            const tabsRet = document.getElementById('ret');

            // ƒ∞√ßerikleri doldur
            titleEl.textContent = product.name;
            priceEl.textContent = '‚Ç∫' + parseFloat(product.price).toLocaleString('tr-TR', {minimumFractionDigits: 2});
            imgEl.src = product.image;
            imgEl.alt = product.name;
            if(tabsDesc){
                tabsDesc.innerHTML = '<p>' + product.description + '</p>';
            }
            if(tabsSpec){
                tabsSpec.innerHTML = '<ul style="padding-left:15px; list-style:disc; line-height:24px;">' +
                    product.features.map(f => '<li>' + f + '</li>').join('') + '</ul>';
            }
            if(tabsRet){
                tabsRet.innerHTML = '<p>14 g√ºn i√ßinde ko≈üulsuz iade. Sertifika ve fatura ile birlikte g√∂nderim yapƒ±lƒ±r.</p>';
            }

            // Sepete ekleme fonksiyonu
            const addBtn = document.getElementById('add-to-cart-btn');
            const quantitySelect = document.getElementById('product-quantity');
            
            if(addBtn){
                addBtn.addEventListener('click', function(e){
                    e.preventDefault();
                    addToCart(product, parseInt(quantitySelect.value));
                });
            }
        }

        function addToCart(product, quantity) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            // √úr√ºn zaten sepette mi kontrol et
            const existingItem = cart.find(item => item.id === product.id);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    quantity: quantity
                });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Header'ƒ± g√ºncelle
            if (typeof updateGlobalCartHeader === 'function') {
                updateGlobalCartHeader();
            }
            
            // G√∂rsel geri bildirim
            const btn = document.getElementById('add-to-cart-btn');
            const originalText = btn.textContent;
            btn.textContent = '‚úì Eklendi!';
            btn.style.backgroundColor = '#4CAF50';
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.backgroundColor = '';
            }, 2000);
            
            // Header'ƒ± g√ºncelle
            updateCartHeader();
            
            // Kullanƒ±cƒ±ya bildirim
            if (confirm(product.name + ' sepete eklendi! Sepete gitmek ister misiniz?')) {
                window.location.href = 'cart.html';
            }
        }

        function updateCartHeader() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            const cartLink = document.querySelector('.right-links a[href="cart.html"]');
            if (cartLink) {
                cartLink.innerHTML = `<span class="ico-products"></span>${totalItems} √ºr√ºn, ‚Ç∫${totalPrice.toLocaleString('tr-TR', {minimumFractionDigits: 2})}`;
            }
        }

        // Sayfa y√ºklendiƒüinde header'ƒ± g√ºncelle
        updateCartHeader();
    })();

    // =============================
    // YORUM Sƒ∞STEMƒ∞
    // =============================
    (function(){
        let currentProductId = null;
        let selectedRating = 0;
        let currentFilter = 'all';

        // URL'den √ºr√ºn ID'sini al
        function getProductId(){
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            return id ? parseInt(id, 10) : null;
        }

        currentProductId = getProductId();
        if(!currentProductId) return;

        // localStorage'dan yorumlarƒ± y√ºkle
        function loadReviews(){
            return JSON.parse(localStorage.getItem('reviews')) || [];
        }

        // localStorage'a yorumlarƒ± kaydet
        function saveReviews(reviews){
            localStorage.setItem('reviews', JSON.stringify(reviews));
        }

        // Bu √ºr√ºn i√ßin yorumlarƒ± getir
        function getProductReviews(){
            const allReviews = loadReviews();
            return allReviews.filter(r => r.productId === currentProductId && r.approved);
        }

        // Yƒ±ldƒ±z g√∂r√ºn√ºm√º olu≈ütur
        function getStarsHTML(rating){
            let stars = '';
            for(let i = 1; i <= 5; i++){
                stars += i <= rating ? '‚≠ê' : '‚òÜ';
            }
            return stars;
        }

        // ƒ∞statistikleri g√ºncelle
        function updateStats(){
            const reviews = getProductReviews();
            const total = reviews.length;

            if(total === 0){
                document.getElementById('avgRating').textContent = '0.0';
                document.getElementById('avgStars').textContent = '‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ';
                document.getElementById('reviewCount').textContent = '0 deƒüerlendirme';
                return;
            }

            // Ortalama hesapla
            const sum = reviews.reduce((acc, r) => acc + r.rating, 0);
            const avg = (sum / total).toFixed(1);

            document.getElementById('avgRating').textContent = avg;
            document.getElementById('avgStars').innerHTML = getStarsHTML(Math.round(avg));
            document.getElementById('reviewCount').textContent = total + ' deƒüerlendirme';

            // Yƒ±ldƒ±z daƒüƒ±lƒ±mƒ±
            for(let i = 1; i <= 5; i++){
                const count = reviews.filter(r => r.rating === i).length;
                const percentage = total > 0 ? (count / total * 100) : 0;
                const bar = document.querySelector('.rating-bar[data-rating="'+i+'"]');
                if(bar){
                    bar.querySelector('.bar-fill').style.width = percentage + '%';
                    bar.querySelector('.bar-count').textContent = count;
                }
            }
        }

        // Yorumlarƒ± g√∂ster
        function displayReviews(filter = 'all'){
            let reviews = getProductReviews();

            // Filtrele
            if(filter !== 'all'){
                if(filter === 'photo'){
                    reviews = reviews.filter(r => r.photos && r.photos.length > 0);
                } else {
                    reviews = reviews.filter(r => r.rating === parseInt(filter));
                }
            }

            // Tarihe g√∂re sƒ±rala (en yeni √ºstte)
            reviews.sort((a, b) => new Date(b.date) - new Date(a.date));

            const container = document.getElementById('reviewsList');

            if(reviews.length === 0){
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">Hen√ºz yorum bulunmamaktadƒ±r. ƒ∞lk yorumu siz yapƒ±n!</p>';
                return;
            }

            container.innerHTML = reviews.map(review => `
                <div class="review-item" style="background: #fff; padding: 25px; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                        <div>
                            <div style="font-weight: 600; font-size: 16px; color: #333; margin-bottom: 5px;">${review.userName}</div>
                            <div style="color: #f39c12; font-size: 18px; margin-bottom: 5px;">${getStarsHTML(review.rating)}</div>
                            <div style="color: #999; font-size: 13px;">${new Date(review.date).toLocaleDateString('tr-TR', {year: 'numeric', month: 'long', day: 'numeric'})}</div>
                        </div>
                        ${review.verified ? '<span style="background: #10b981; color: #fff; padding: 5px 12px; border-radius: 15px; font-size: 12px; font-weight: 600;">‚úì Onaylƒ± Alƒ±cƒ±</span>' : ''}
                    </div>
                    <p style="color: #555; line-height: 1.8; margin-bottom: ${review.photos && review.photos.length > 0 ? '15px' : '0'};">${review.comment}</p>
                    ${review.photos && review.photos.length > 0 ? `
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 15px;">
                            ${review.photos.map(photo => `<img src="${photo}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 6px; cursor: pointer;" onclick="window.open('${photo}')">`).join('')}
                        </div>
                    ` : ''}
                    <div style="display: flex; gap: 20px; padding-top: 15px; border-top: 1px solid #f0f0f0;">
                        <button onclick="markHelpful(${review.id}, true)" style="background: none; border: none; color: #666; cursor: pointer; font-size: 14px; display: flex; align-items: center; gap: 5px;">
                            üëç Faydalƒ± (${review.helpful || 0})
                        </button>
                        <button onclick="markHelpful(${review.id}, false)" style="background: none; border: none; color: #666; cursor: pointer; font-size: 14px; display: flex; align-items: center; gap: 5px;">
                            üëé Faydalƒ± Deƒüil (${review.notHelpful || 0})
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Yƒ±ldƒ±z se√ßimi
        document.querySelectorAll('.star-rating .star').forEach(star => {
            star.addEventListener('click', function(){
                selectedRating = parseInt(this.dataset.rating);
                document.getElementById('ratingInput').value = selectedRating;
                
                // Yƒ±ldƒ±zlarƒ± g√ºncelle
                document.querySelectorAll('.star-rating .star').forEach((s, idx) => {
                    s.textContent = idx < selectedRating ? '‚≠ê' : '‚òÜ';
                    s.style.color = idx < selectedRating ? '#f39c12' : '#ddd';
                });
            });

            star.addEventListener('mouseover', function(){
                const hoverRating = parseInt(this.dataset.rating);
                document.querySelectorAll('.star-rating .star').forEach((s, idx) => {
                    s.textContent = idx < hoverRating ? '‚≠ê' : '‚òÜ';
                    s.style.color = idx < hoverRating ? '#f39c12' : '#ddd';
                });
            });
        });

        document.querySelector('.star-rating').addEventListener('mouseleave', function(){
            document.querySelectorAll('.star-rating .star').forEach((s, idx) => {
                s.textContent = idx < selectedRating ? '‚≠ê' : '‚òÜ';
                s.style.color = idx < selectedRating ? '#f39c12' : '#ddd';
            });
        });

        // Filtre butonlarƒ±
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function(){
                document.querySelectorAll('.filter-btn').forEach(b => {
                    b.classList.remove('active');
                    b.style.background = '#fff';
                    b.style.color = '#333';
                });
                this.classList.add('active');
                this.style.background = '#1f2937';
                this.style.color = '#fff';
                
                currentFilter = this.dataset.filter;
                displayReviews(currentFilter);
            });
        });

        // Yorum formu g√∂nder
        document.getElementById('reviewForm').addEventListener('submit', function(e){
            e.preventDefault();

            if(selectedRating === 0){
                alert('L√ºtfen bir puan se√ßin!');
                return;
            }

            const name = document.getElementById('nameInput').value.trim();
            const comment = document.getElementById('commentInput').value.trim();

            if(!name || !comment){
                alert('L√ºtfen t√ºm alanlarƒ± doldurun!');
                return;
            }

            const newReview = {
                id: Date.now(),
                productId: currentProductId,
                userName: name,
                rating: selectedRating,
                comment: comment,
                photos: [],
                date: new Date().toISOString(),
                helpful: 0,
                notHelpful: 0,
                approved: false, // Admin onayƒ± bekliyor
                verified: false
            };

            const reviews = loadReviews();
            reviews.push(newReview);
            saveReviews(reviews);

            // Formu temizle
            this.reset();
            selectedRating = 0;
            document.querySelectorAll('.star-rating .star').forEach(s => {
                s.textContent = '‚òÜ';
                s.style.color = '#ddd';
            });

            alert('Yorumunuz g√∂nderildi! Admin onayƒ±ndan sonra yayƒ±nlanacaktƒ±r. Te≈üekk√ºrler! üéâ');
        });

        // Faydalƒ± i≈üaretle
        window.markHelpful = function(reviewId, isHelpful){
            const reviews = loadReviews();
            const review = reviews.find(r => r.id === reviewId);
            
            if(review){
                if(isHelpful){
                    review.helpful = (review.helpful || 0) + 1;
                } else {
                    review.notHelpful = (review.notHelpful || 0) + 1;
                }
                saveReviews(reviews);
                displayReviews(currentFilter);
            }
        };

        // Sayfa y√ºklendiƒüinde yorumlarƒ± g√∂ster
        updateStats();
        displayReviews();

        // Demo yorumlar ekle (ilk kez)
        if(loadReviews().length === 0){
            const demoReviews = [
                {
                    id: 1,
                    productId: 1,
                    userName: "Ay≈üe Yƒ±lmaz",
                    rating: 5,
                    comment: "Harika bir √ºr√ºn! Kalitesi m√ºkemmel, tam beklediƒüim gibi. Kesinlikle tavsiye ederim.",
                    photos: [],
                    date: new Date(Date.now() - 5*24*60*60*1000).toISOString(),
                    helpful: 12,
                    notHelpful: 0,
                    approved: true,
                    verified: true
                },
                {
                    id: 2,
                    productId: 1,
                    userName: "Mehmet Demir",
                    rating: 4,
                    comment: "√úr√ºn g√ºzel ama kargo biraz ge√ß geldi. Fiyat-performans a√ßƒ±sƒ±ndan iyi.",
                    photos: [],
                    date: new Date(Date.now() - 3*24*60*60*1000).toISOString(),
                    helpful: 8,
                    notHelpful: 1,
                    approved: true,
                    verified: true
                },
                {
                    id: 3,
                    productId: 1,
                    userName: "Zeynep Kaya",
                    rating: 5,
                    comment: "√áok zarif ve ≈üƒ±k! Ni≈üanƒ±mda taktƒ±m, herkes √ßok beƒüendi. Te≈üekk√ºrler! üíé",
                    photos: [],
                    date: new Date(Date.now() - 1*24*60*60*1000).toISOString(),
                    helpful: 15,
                    notHelpful: 0,
                    approved: true,
                    verified: true
                }
            ];
            saveReviews(demoReviews);
            updateStats();
            displayReviews();
        }
    })();
    </script>
</body>
</html>
